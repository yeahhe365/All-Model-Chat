è¯·å¤åˆ¶ä»¥ä¸‹æ­£ç¡®çš„ä»£ç åˆ°æ§åˆ¶å°ï¼š

ç¬¬ä¸€æ­¥ - åŠ è½½ä¿®å¤å·¥å…·ï¼š
fetch('./ultimate-proxy-fix.js').then(r=>r.text()).then(eval);

ç¬¬äºŒæ­¥ - è¿è¡Œä¿®å¤ï¼ˆè¯·æ›¿æ¢ä¸ºæ‚¨çš„API Keyï¼‰ï¼š
UltimateProxyFix.ultimateFix("AIzaSyCUduSy8NLnF0hKWjgial1Qtm8YQ6-LKr0");

æ³¨æ„äº‹é¡¹ï¼š
1. ç¡®ä¿æ–‡ä»¶åæ˜¯ ultimate-proxy-fix.jsï¼ˆä¸æ˜¯ ultimate-proxy-fix,jsï¼‰
2. ç¡®ä¿ç®­å¤´å‡½æ•°æ˜¯ r=>r.text()ï¼ˆä¸æ˜¯ r=r.text()ï¼‰
3. ç¡®ä¿æ‰€æœ‰çš„å¼•å·éƒ½æ˜¯è‹±æ–‡å¼•å· ' æˆ– "
4. ç¡®ä¿æ²¡æœ‰å¤šä½™çš„ç©ºæ ¼æˆ–å­—ç¬¦

å¦‚æœè¿˜æ˜¯ä¸è¡Œï¼Œè¯·å°è¯•è¿™ä¸ªç®€åŒ–ç‰ˆæœ¬ï¼š

ç®€åŒ–ç‰ˆæœ¬ - ç›´æ¥è¿è¡Œä¿®å¤ä»£ç ï¼š
// è®¾ç½®ä»£ç†é…ç½®
localStorage.setItem('app-settings', JSON.stringify({
    useCustomApiConfig: true,
    apiProxyUrl: 'https://api-proxy.me/gemini',
    apiKey: 'AIzaSyCUduSy8NLnF0hKWjgial1Qtm8YQ6-LKr0',
    modelId: 'gemini-2.5-flash',
    temperature: 0.7,
    topP: 0.9,
    systemInstruction: '',
    showThoughts: false,
    thinkingBudget: 0,
    language: 'system',
    baseFontSize: 14,
    isStreamingEnabled: true,
    isAutoScrollOnSendEnabled: true,
    isAutoTitleEnabled: true,
    expandCodeBlocksByDefault: false,
    isMermaidRenderingEnabled: true,
    isGraphvizRenderingEnabled: true,
    isAutoSendOnSuggestionClick: true,
    isTranscriptionThinkingEnabled: false,
    transcriptionModelId: 'gemini-2.5-flash',
    ttsVoice: 'Puck',
    themeId: 'system'
}));

// æ‹¦æˆªfetchå‡½æ•°
const originalFetch = window.fetch;
window.fetch = function(input, init = {}) {
    const url = typeof input === 'string' ? input : input.url;
    if (url && url.includes('generativelanguage.googleapis.com')) {
        const proxyUrl = url.replace('https://generativelanguage.googleapis.com/v1beta', 'https://api-proxy.me/gemini/v1beta');
        console.log('ğŸ”„ ä»£ç†è¯·æ±‚:', url, '->', proxyUrl);
        const newInput = typeof input === 'string' ? proxyUrl : new Request(proxyUrl, input);
        return originalFetch(newInput, init);
    }
    return originalFetch(input, init);
};

console.log('âœ… ä»£ç†æ‹¦æˆªå™¨å·²æ¿€æ´»ï¼Œè¯·åˆ·æ–°é¡µé¢æµ‹è¯•');